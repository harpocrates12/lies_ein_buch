<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Lies Ein Buch</title>
        <link rel="stylesheet" href="static/styles.css">
    </head>
    <body>
        <h1>Lies Ein Buch Tag 2018</h1>
        <div class="flex-container">
            <div class="grid-item">
                <div class="title">
                    Das steinerne Herz
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/das_steinerne_herz.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 1 Stunde und 1 Minute für "Das steinerne Herz" von E.T.A. Hoffmann.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Das steinerne Herz"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Der kleine Prinz
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/der_kleine_prinz.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 2 Stunden und 23 Minuten für "Der kleine Prinz" von Antoine de Saint-Exupéry.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Der kleine Prinz"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Siddhartha
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/siddharta.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 4 Stunden und 22 Minuten für "Siddhartha" von Hermann Hesse.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Siddhartha"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Feuchtgebiete
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/feuchtgebiete.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 5 Stunden und 35 Minuten für "Feuchtgebiete" von Charlotte Roche.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Feuchtgebiete"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Der goldene Handschuh
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/der_goldene_handschuh.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 6 Stunden und 19 Minuten für "Der goldene Handschuh" von Heinz Strunk.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Der goldene Handschuh"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Harry Potter und der Stein der Weisen
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/harry_potter.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 9 Stunden und 52 Minuten für "Harry Potter und der Stein der Weisen" von J.K. Rowling.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Harry Potter und der Stein der Weisen"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Die unendliche Geschichte
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/die_unendliche_geschichte.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 15 Stunden und 6 Minuten für "Die unendliche Geschichte" von Michael Ende.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Die unendliche Geschichte"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Fifty Shades of Grey
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/fifty_shades_of_grey.png">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 19 Stunden und 48 Minuten für "Fifty Shades of Grey" von E.L. James.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Fifty Shades of Grey"></div>
                </div>
            </div>
        </div>

        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
	     crossorigin="anonymous"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DzdivAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb"
	     crossorigin="anonymous"></script>
	    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn"
	     crossorigin="anonymous"></script>
        <script type="text/javascript">
            $(function(){
                var books = {
                    Das_steinerne_Herz: [3660000, '01:01'],
                    Der_kleine_Prinz: [8580000, '02:23'],
                    Siddhartha: [15720000, '04:22'],
                    Feuchtgebiete: [20100000, '05:35'],
                    Der_goldene_Handschuh: [22740000, '06:19'],
                    Harry_Potter_und_der_Stein_der_Weisen: [35520000, '09:52'],
                    Die_unendliche_Geschichte: [54360000, '15:06'],
                    Fifty_Shades_of_Grey: [71280000, '19:48']
                };
                var startToday = new Date(new Date().toLocaleDateString().split('/').join(' ')).getTime();
                var endToday = (startToday + (60 * 60 * 24 * 1000));

                var el = document.getElementsByClassName('book');

                setInterval(function(){
                    var nowInSeconds = new Date().getTime();

                    for (i = 0; i < el.length; i++){
                        var avgTime = books[el[i].getAttribute("value").split(" ").join('_')][0];
                        var latestStart = (endToday - avgTime);
                        var remainingUntilDeadline = (latestStart - nowInSeconds);
                        var formattedDeadline = new Date(Math.round(remainingUntilDeadline)).toISOString().substr(11,8);

                        el[i].innerHTML = getText(remainingUntilDeadline, formattedDeadline)
                    };
                }, 1000)

                function getText(deadline, formattedDeadline){
                    if (deadline > 0){
                        return "In spätestens " + "<span class='deadline'>" + formattedDeadline + "</span>" + " Stunden musst du anfangen um heute noch fertig zu werden!"
                    }
                    else {
                        return "Das wirst du heute leider nicht mehr schaffen..."
                    };
                };
            });
        </script>
    </body>
</html>