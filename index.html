<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>Lies Ein Buch</title>
        <link rel="stylesheet" href="static/styles.css">
        <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    </head>
    <body>
        <h1>Bücher die man heute noch vollständig lesen kann</h1>
        <div class="flex-container">
            <div class="grid-item">
                <div class="title">
                    Das steinerne Herz
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/das_steinerne_herz.png" style="height: 85px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 1 Stunde und 1 Minute für "Das steinerne Herz" von E.T.A. Hoffmann.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Das steinerne Herz"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Der kleine Prinz
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/der_kleine_prinz.png" style="height: 85px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 2 Stunden und 23 Minuten für "Der kleine Prinz" von Antoine de Saint-Exupéry.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Der kleine Prinz"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Siddhartha
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/siddharta.png" style="height: 85px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 4 Stunden und 22 Minuten für "Siddhartha" von Hermann Hesse.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Siddhartha"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Feuchtgebiete
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/feuchtgebiete.png" style="height: 65px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 5 Stunden und 35 Minuten für "Feuchtgebiete" von Charlotte Roche.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Feuchtgebiete"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Der goldene Handschuh
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/der_goldene_handschuh.png" style="height: 85px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 6 Stunden und 19 Minuten für "Der goldene Handschuh" von Heinz Strunk.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Der goldene Handschuh"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Harry Potter und der Stein der Weisen
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/harry_potter.png" style="height: 85px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 9 Stunden und 52 Minuten für "Harry Potter und der Stein der Weisen" von J.K. Rowling.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Harry Potter und der Stein der Weisen"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Die unendliche Geschichte
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/die_unendliche_geschichte.png" style="height: 65px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 15 Stunden und 6 Minuten für "Die unendliche Geschichte" von Michael Ende.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Die unendliche Geschichte"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Fifty Shades of Grey
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/fifty_shades_of_grey.png" style="height: 85px;">
                    </div>
                    <span class="tooltiptext">
                        Ein durchschnittlicher Leser benötigt 19 Stunden und 48 Minuten für "Fifty Shades of Grey" von E.L. James.
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Fifty Shades of Grey"></div>
                </div>
            </div>

            <div class="grid-item">
                <div class="title">
                    Die Bibel
                </div>
                <div class="tooltip">
                    <div class="image">
                        <img src="static/images/bibel.png" style="height: 85px;">
                    </div>
                    <span class="tooltiptext" style="width: 125px;">
                        Die Bibel an einem Tag lesen?! Gott hat 7 Tage gebraucht, um die Welt zu schaffen...
                    </span>
                </div>
                <div class="items">
                    <div class="book" value="Die Bibel"></div>
                </div>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n"
        crossorigin="anonymous"></script>        
        <script type="text/javascript">
            $(function(){
                setInterval(function(){
                var books = {
                    Das_steinerne_Herz: [3660000],
                    Der_kleine_Prinz: [8580000],
                    Siddhartha: [15720000],
                    Feuchtgebiete: [20100000],
                    Der_goldene_Handschuh: [22740000],
                    Harry_Potter_und_der_Stein_der_Weisen: [35520000],
                    Die_unendliche_Geschichte: [54360000],
                    Fifty_Shades_of_Grey: [71280000],
                    Die_Bibel: [86400001]
                };

                var day = new Date().toString().split(' ')[2]
                var month = new Date().toString().split(' ')[1]
                var year = new Date().toString().split(' ')[3]
                var startToday = new Date(month + " " + day + ", " + year).getTime();

                var endToday = startToday + (60 * 60 * 24 * 1000)
                
                var el = document.getElementsByClassName('book');
                    var nowInSeconds = new Date().getTime();

                    for (i = 0; i < el.length; i++){
                        var avgTime = books[el[i].getAttribute("value").split(" ").join('_')][0];
                        var latestStart = endToday - avgTime;
                        var remainingUntilDeadline = latestStart - nowInSeconds;
                        var formattedDeadline = msToTime(Math.round(remainingUntilDeadline));

                        el[i].innerHTML = getText(remainingUntilDeadline, formattedDeadline)
                    };
                }, 1000)

                function msToTime(duration) {
                    seconds = parseInt((duration / 1000) % 60),
                    minutes = parseInt((duration / (1000 * 60)) % 60),
                    hours = parseInt((duration / (1000 * 60 * 60)) % 24);

                    hours = (hours < 10) ? "0" + hours : hours;
                    minutes = (minutes < 10) ? "0" + minutes : minutes;
                    seconds = (seconds < 10) ? "0" + seconds : seconds;

                    return hours + ":" + minutes + ":" + seconds;
                }
                
                function getText(deadline, formattedDeadline){
                    if (deadline > 0){
                        return "In spätestens " + "<p class='deadline'>" + formattedDeadline + "</p>" + " Stunden anfangen, um heute noch fertig zu werden!"
                    }
                    else {
                        return "Das ist heute leider nicht mehr zu schaffen..."
                    };
                };
            });
        </script>
    </body>
</html>
